<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>PLAN SHUTDOWN ENTRY</title>

<style>
body{
  font-family:"Segoe UI",Roboto,Arial;
  background:#f1f3f6;
  margin:0;
}
header{
  background:#00695c;
  color:#fff;
  padding:14px;
  font-size:18px;
  text-align:center;
  font-weight:600;
}
.container{
  padding:16px;
  max-width:500px;
  margin:auto;
}
.card{
  background:#fff;
  padding:16px;
  border-radius:12px;
  box-shadow:0 2px 6px rgba(0,0,0,0.2);
}
input,select{
  width:100%;
  padding:12px;
  margin-top:8px;
  margin-bottom:12px;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:14px;
}
button{
  width:100%;
  padding:14px;
  background:#00695c;
  color:#fff;
  border:none;
  border-radius:10px;
  font-size:16px;
  cursor:pointer;
}
button:hover{opacity:0.9}
.back{
  background:#888;
  margin-top:10px;
}
</style>
</head>

<body>

<header>PLAN SHUTDOWN ENTRY</header>

<div class="container">
<div class="card">

<label>Date</label>
<input type="date" id="date">

<label>From Time</label>
<input type="time" id="from">

<label>To Time</label>
<input type="time" id="to">

<label>Feeder</label>
<input type="text" id="feeder" placeholder="FEEDER-1">

<label>Installation</label>
<input type="text" id="installation">

<label>Entry By</label>
<input type="text" id="entryby">

<button onclick="savePlan()">SAVE PLAN</button>
<button class="back" onclick="goBack()">â¬… Back</button>

</div>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzbXYhYWYBFXw3GnTdzFtDvC5XXCfc_sGWifRr0ghWQwVCPs-L0GH55dTm866V9DbmYHA/exec"; // <-- apna URL

// ============ SAVE ============
function savePlan(){

  let params = new URLSearchParams({
    action:"plan",
    date:document.getElementById("date").value,
    from:document.getElementById("from").value,
    to:document.getElementById("to").value,
    feeder:document.getElementById("feeder").value,
    installation:document.getElementById("installation").value,
    entryby:document.getElementById("entryby").value
  });

  fetch(SCRIPT_URL,{
    method:"POST",
    body:params
  })
  .then(r=>r.text())
  .then(res=>{
    alert(res);
    clearForm();
  });
}

// ============ POPUP REMINDER ============
fetch(SCRIPT_URL+"?action=getreminder")
.then(r=>r.json())
.then(data=>{
  if(data.length>0){
    let msg="ðŸ”” TOMORROW PLAN SHUTDOWN:\n\n";
    data.forEach(x=>{
      msg +=
        "Feeder: "+x.feeder+"\n"+
        "Time: "+x.from+" to "+x.to+"\n"+
        "Installation: "+x.installation+"\n\n";
    });
    alert(msg);
  }
});

// ============ UTILS ============
function clearForm(){
  document.querySelectorAll("input").forEach(i=>i.value="");
}
function goBack(){
  window.open("index.html","_self");
}
</script>

</body>
</html>
